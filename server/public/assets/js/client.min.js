/*! sportngin 2016-05-25 */
var app=angular.module("tryoutsApp",["ngRoute","mobile-angular-ui","mobile-angular-ui.gestures"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/app/view/",controller:"LoginController",controllerAs:"login"}).when("/logout",{templateUrl:"/app/view/",controller:"LogoutController",controllerAs:"logout"}).when("/archives",{templateUrl:"/app/view/archives",controller:"ArchivesController",controllerAs:"archive"}).when("/new",{templateUrl:"/app/view/new",controller:"TryoutInputController",controllerAs:"input"}).when("/review",{templateUrl:"/app/view/review",controller:"ReviewInputController",controllerAs:"rev"}),b.html5Mode(!0)}]),app.controller("AppController",["UserService",function(a){var b=this;b.user=a.user,a.isAuthenticated(function(a,b){console.log(a)})}]),app.controller("LoginController",["$http","UserService","TryoutService",function(a,b,c){b.isAuthenticated(function(a){});var d=this;d.tryouts=[];var e=function(){a.get("/app/view/data").then(function(a){return console.log("response from /app/view/data",a),200!==a.status,d.tryouts=a.data,a.data})};e(),d.guest={},d.guestLogin=function(){console.log(d.guest),b.guestAuthentication(d.guest)},d.generateGuestCode=function(a){console.log(a),c.generateCode(a)}}]),app.controller("TryoutInputController",["TryoutService","$http",function(a,b){var c=this,d=1;c.tryout={title:"",date:null},c.categories=[{id:1}],c.addField=function(){d+=1,c.categories.push({id:d})},c.removeField=function(a){c.categories.splice(a,1)},c.submitInfo=function(){c.tryout.categories=c.categories,a.saveTryoutInfo(c.tryout)}}]),app.controller("TryoutManagementController",["$http",function(a){}]),app.controller("LogoutController",["UserService","$templateCache","$location",function(a,b,c){b.removeAll(),a.isAuthenticated(function(b){b===!0?a.logout(function(){c.path("/")}):c.path("/")})}]),app.controller("ArchivesController",function(){}),app.factory("UserService",["$http",function(a){var b={},c=function(b){a.get("/auth/logout").then(function(a){b()})},d=function(c){a.get("/auth/check").then(function(a){a.data.success===!0?(b.data=a.data.user,c(!0,a.data)):(b.data=a.data,c(!1))})},e=function(b){a.post("/auth/guest",b).then(function(a){console.log(a)})};return{user:b,logout:c,isAuthenticated:d,guestAuthentication:e}}]),app.factory("TryoutService",["$http",function(a){var b=[],c=function(b){console.log("factory",b),a.post("/app/view/new",b).then(function(a){sessionStorage.removeItem("test"),console.log(a.config.data),sessionStorage.setItem("test",a.config.data);sessionStorage.getItem("test");console.log("item")})},d=function(b){a.get("/app/view/guestcode/"+b._id).then(function(a){console.log("response.data",a.data)})},e=function(){var a=sessionStorage.getItem("test");console.log(a)};return{saveTryoutInfo:c,getTryoutInfo:e,generateCode:d,data:b}}]);