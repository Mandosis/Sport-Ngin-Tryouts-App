/*! sportngin 2016-05-27 */
var app=angular.module("tryoutsApp",["ngRoute","mobile-angular-ui","mobile-angular-ui.gestures","pickadate"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/app/view/",controller:"LoginController",controllerAs:"login"}).when("/logout",{templateUrl:"/app/view/",controller:"LogoutController",controllerAs:"logout"}).when("/archives",{templateUrl:"/app/view/archives",controller:"ArchivesController",controllerAs:"archive"}).when("/new",{templateUrl:"/app/view/new",controller:"TryoutInputController",controllerAs:"input"}).when("/edit/:id",{templateUrl:"/app/view/edit/",controller:"EditController",controllerAs:"edit"}).when("/players/:id",{templateUrl:"/app/view/players",controller:"PlayerNumberController",controllerAs:"num"}).when("/tryout/:id",{templateUrl:"/app/view/tryout",controller:"TryoutReviewController",controllerAs:"review"}).when("/doTheThing/:id",{templateUrl:"/app/view/doTheThing",controller:"AssignScoreController",controllerAs:"assign"}),b.html5Mode(!0)}]),app.controller("AssignScoreController",function(){console.log("Hello World")}),app.controller("TryoutReviewController",["$routeParams","TryoutService",function(a,b){var c=this;c.player={},c.player.tryout_id=a.id,console.log(c.player.tryout_id),c.reviewPlayer=function(){b.scorePlayer(c.player)}}]),app.controller("PlayerNumberController",["$routeParams","TryoutService",function(a,b){var c=this;c.tryout={},c.tryout.playersList=[{player:"1",first:"adam",last:"sanders"},{player:"2",first:"taylor",last:"sandquist"}];c.tryout.tryout_id=a.id,console.log(c.tryout),c.savePlayers=function(){b.savePlayersToDb(c.tryout.tryout_id)}}]),app.controller("AppController",["UserService",function(a){var b=this;b.user=a.user,a.isAuthenticated(function(a,b){console.log(a)})}]),app.controller("LoginController",["$http","UserService","TryoutService",function(a,b,c){var d=this;d.tryouts=[],d.guest={},d.tryouts=c.data,b.isAuthenticated(function(a){a===!0&&c.fetchTryouts(),d.generateGuestCode=function(a){c.generateCode(a)}}),d.guestLogin=function(){b.guestAuthentication(d.guest,function(a){a===!0?console.log("Code worked!"):console.log(":(")})},d.deleteTryout=function(a){c.deleteTryout(a)}}]),app.controller("TryoutInputController",["TryoutService","UserService","$location",function(a,b,c){var d=this;b.isAuthenticated(function(b){if(b===!0){var e=1;d.tryout={},d.categories=[{id:1}],d.addField=function(){e+=1,d.categories.push({id:e})},d.removeField=function(a){d.categories.splice(a,1)},d.submitInfo=function(){d.tryout.categories=d.categories,a.saveTryoutInfo(d.tryout)}}else c.path("/")})}]),app.controller("EditController",["TryoutService","$routeParams",function(a,b){}]),app.controller("LogoutController",["UserService","$templateCache","$location",function(a,b,c){b.removeAll(),a.isAuthenticated(function(b){b===!0?a.logout(function(){c.path("/")}):c.path("/")})}]),app.controller("ArchivesController",function(){}),app.factory("UserService",["$http",function(a){var b={},c=function(b){a.get("/auth/logout").then(function(a){b()})},d=function(c){a.get("/auth/check").then(function(a){a.data.success===!0?(b.data=a.data.user,c(!0,a.data)):(b.data=a.data,c(!1))})},e=function(c,d){a.post("/auth/guest",c).then(function(a){console.log(a),b.guest=a.data.guest,d(!0)},function(a){d(!1)})};return{user:b,logout:c,isAuthenticated:d,guestAuthentication:e}}]),app.factory("TryoutService",["$http","$location",function(a,b){var c=[],d=function(c){a.post("/app/view/new",c).then(function(a){b.path("/players/"+a.data._id)})},e=function(b){a.get("/app/view/guestcode/"+b._id).then(function(a){f()})},f=function(){a.get("/app/view/data").then(function(a){c.val=a.data})},g=function(b){a["delete"]("/app/view/"+b._id).then(function(a){f()})},h=function(c){console.log(c),a.get("/app/view/tryout").then(function(a){b.path("/tryout/"+c)})},i=function(c){console.log(c),a.get("/app/view/doTheThing/"+c.tryout_id).then(function(a){b.path("/doTheThing/:id")})};return{saveTryoutInfo:d,generateCode:e,fetchTryouts:f,deleteTryout:g,data:c,savePlayersToDb:h,scorePlayer:i}}]);